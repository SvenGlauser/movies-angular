<div class="content">
  <div class="left" *ngIf="(hasPersons() || hasMovies() || hasTVs()) && chargement === 0 || chargement !== 0">
    <section class="filter">
      <mat-button-toggle-group [formControl]="filter" [name]="'filter'" aria-label="Result type">
        <mat-button-toggle [value]="'movie'" *ngIf="hasMovies()">Films</mat-button-toggle>
        <mat-button-toggle [value]="'tv'" *ngIf="hasTVs()">Séries</mat-button-toggle>
        <mat-button-toggle [value]="'person'" *ngIf="hasPersons()">Personnes</mat-button-toggle>
      </mat-button-toggle-group>
    </section>
  </div>
  <div class="right">
    <section class="search">
      <mat-form-field appearance="fill" color="primary" (change)="search()">
        <mat-label>Search</mat-label>
        <input matInput placeholder="Movie, TV or person" [formControl]="searchValue" autocomplete="off" autofocus>
        <mat-icon matSuffix>search</mat-icon>
      </mat-form-field>
    </section>
    <app-chargement *ngIf="chargement; else content"></app-chargement>
    <ng-template #content>
      <section class="filter" *ngIf="hasPersons() || hasMovies() || hasTVs()">
        <mat-button-toggle-group [formControl]="filter" [name]="'filter'" aria-label="Result type">
          <mat-button-toggle [value]="'movie'" *ngIf="hasMovies()">Films</mat-button-toggle>
          <mat-button-toggle [value]="'tv'" *ngIf="hasTVs()">Séries</mat-button-toggle>
          <mat-button-toggle [value]="'person'" *ngIf="hasPersons()">Personnes</mat-button-toggle>
        </mat-button-toggle-group>
      </section>
      <section class="result">
        <div [ngSwitch]="filter.value" *ngIf="persons !== undefined && tvs !== undefined && movies !== undefined">
          <ng-container *ngSwitchCase="'tv'">
            <app-tv *ngFor="let tv of tvs.results" [tv]="tv" [routerLink]="['/view/tv/' + tv.id]"></app-tv>
          </ng-container>
          <ng-container *ngSwitchCase="'movie'">
            <app-movie *ngFor="let movie of movies.results" [movie]="movie" [routerLink]="['/view/movie/' + movie.id]"></app-movie>
          </ng-container>
          <ng-container *ngSwitchCase="'person'">
            <app-person *ngFor="let person of persons.results" [person]="person" [routerLink]="['/view/person/' + person.id]"></app-person>
          </ng-container>
          <ng-container *ngIf="!hasPersons() && !hasMovies() && !hasTVs()">
            <h3 class="aucun-resultat">Aucun résultat</h3>
          </ng-container>
        </div>
      </section>
    </ng-template>
  </div>
</div>
